<ng-container *transloco="let t; read: 'main'">
  <main class="main">
    <h1 class="main__title card-with-blur scale">{{ t('title') }}</h1>
    <section class="main__boards grid">
      <div
        class="new-board card-with-blur scale"
        pTooltip="{{ t('createNewBoard') }}"
        tooltipPosition="bottom"
        (click)="this.mainService.showModalWindowForCreate()">
        <i class="pi pi-plus"></i>
      </div>
      <div
        class="board card-with-blur scale"
        *ngFor="let board of boards$ | async; let index = index"
        [pTooltip]="board.description | slice: 0:40"
        tooltipPosition="bottom"
        #boardImage>
        <div class="board__setting">
          <div
            class="setting"
            (click)="
              this.mainService.updateId(board.id);
              this.mainService.showConfirmationModalWindow()
            ">
            <i class="pi pi-trash"></i>
          </div>
          <div class="setting" (click)="showBackgroundChangeModalWindow(index)">
            <i class="pi pi-cog"></i>
          </div>
          <div
            class="setting"
            (click)="
              this.mainService.updateId(board.id);
              this.mainService.showModalWindowForUpdate()
            ">
            <i class="pi pi-pencil"></i>
          </div>
        </div>
        <div class="wrap" [routerLink]="[board.id]">
          <h3 class="board__title">{{ board.title | slice: 0:17 }}</h3>
        </div>
      </div>
    </section>
    <section class="overlay" *ngIf="this.mainService.isModalWindow">
      <div class="inform-card card-simple shadow-4">
        <h2 class="font-light inform-title">
          {{ this.mainService.titleModalWindow }}
        </h2>
        <form
          action=""
          [formGroup]="formMain"
          (ngSubmit)="formMain.valid && onSubmit()">
          <div class="fields-wrapper p-inputtext-lg">
            <div class="p-float-label inform-input field">
              <input
                type="text"
                pInputText
                class="inform-input-inside"
                name="nameInput"
                formControlName="title"
                autocomplete="off" />
              <label for="nameInput">{{ t('titleBoard') }}</label>
            </div>
            <div class="p-float-label inform-input field">
              <input
                type="text"
                pInputText
                class="inform-input-inside"
                name="nameInput"
                formControlName="description"
                autocomplete="off" />
              <label for="nameInput">{{ t('descriptionBoard') }}</label>
            </div>
          </div>
          <div class="inform-wrapper">
            <button
              pButton
              pRipple
              color="primary"
              type="button"
              class="p-button-raised p-button-danger button-custom-white button-false"
              (click)="hideModalWindow()"
              label="{{ t('false') }}"></button>
            <button
              pButton
              pRipple
              color="primary"
              class="p-button-raised p-button-success button-custom-white button-true"
              type="submit"
              label="{{ t('true') }}"></button>
          </div>
        </form>
      </div>
    </section>
    <section class="overlay" *ngIf="this.mainService.isbackgroundSwap">
      <div class="inform-card card-simple shadow-4">
        <h2 class="font-light inform-title">Веберите фон</h2>
        <div class="wrap-background">
          <div
            class="background"
            *ngFor="let image of this.mainService.images"
            [ngStyle]="{
              'background-image': 'url(assets/images/' + image + '.png)'
            }"
            (click)="changeBackground(image)"></div>
        </div>
        <div class="inform-wrapper">
          <button
            pButton
            pRipple
            color="primary"
            type="button"
            class="p-button-raised p-button-danger button-custom-white button-false"
            (click)="this.mainService.hideBackgroundChangeModalWindow()"
            label="Отмена"></button>
        </div>
      </div>
    </section>
    <app-confirmation-modal
      *ngIf="
        this.confirmationService.isConfirmationModalBoard
      "></app-confirmation-modal>
  </main>
</ng-container>
