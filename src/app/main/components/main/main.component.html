<ng-container *transloco="let t; read: 'main'">
  <main class="main">
    <h1 class="main__title card-with-blur scale">{{ t('title') }}</h1>
    <section class="main__boards grid">
      <div
        class="new-board card-with-blur scale"
        pTooltip="{{ t('createNewBoard') }}"
        tooltipPosition="bottom"
        (click)="this.mainService.openCreateBoardModal()"
        cdkDrag>
        <i class="pi pi-plus"></i>
      </div>
      <div
        class="board card-with-blur scale"
        *ngFor="let board of boards$ | async; let index = index"
        [pTooltip]="board.description | slice: 0:40"
        tooltipPosition="bottom"
        #boardImage
        [id]="board.id">
        <div class="board__setting">
          <div
            class="setting"
            (click)="this.mainService.openDeleteBoardModal(board.id)">
            <i class="pi pi-trash"></i>
          </div>
          <div
            class="setting"
            (click)="showBackgroundChangeModalWindow(board.id, index)">
            <i class="pi pi-cog"></i>
          </div>
          <div
            class="setting"
            (click)="this.mainService.openUpdateBoardModal(board.id)">
            <i class="pi pi-pencil"></i>
          </div>
        </div>
        <div class="wrap" [routerLink]="[board.id]">
          <h3 class="board__title">{{ board.title | slice: 0:17 }}</h3>
        </div>
      </div>
    </section>
    <section class="overlay" *ngIf="this.mainService.isbackgroundSwap">
      <div class="inform-card card-simple shadow-4">
        <h2 class="font-light inform-title">{{ t('titleBackground') }}</h2>
        <div class="wrap-background">
          <div
            class="background"
            *ngFor="let image of this.mainService.images"
            [ngStyle]="{
              'background-image': 'url(assets/images/' + image + '-small.png)'
            }"
            (click)="changeBackground(image)"></div>
        </div>
        <div class="inform-wrapper">
          <button
            pButton
            pRipple
            color="primary"
            type="button"
            class="p-button-raised p-button-danger button-custom-white button-false"
            (click)="this.mainService.hideBackgroundChangeModalWindow()"
            label="{{ t('cancel') }}"></button>
        </div>
      </div>
    </section>
  </main>
</ng-container>
