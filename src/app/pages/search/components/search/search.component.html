<ng-container *transloco="let transLoco; read: 'search'">
  <section class="search">
    <div class="search-small-circle-fake"></div>
    <div class="search-small-circle shadow-3 scale"></div>
    <h1 class="search__title card-with-blur scale">
      {{ transLoco('mainTitle') }}
    </h1>
    <div class="w-12 md:w-10 search-wrap">
      <div class="card-simple search-card shadow-4">
        <div class="card-with-blur search-card-inside shadow-4">
          <table
            *ngIf="this.tasksSubj$ | async as tasks"
            class="table text-xs sm:text-sm md:text-base">
            <thead>
              <tr>
                <th
                  (click)="this.filterService.changeSortValue('order')"
                  [class.active]="this.filterService.activeClass === 'order'">
                  {{ transLoco('order') }}
                  <span
                    class="arrow"
                    *ngIf="!this.filterService.isOrder; else blockOrder">
                    ▼▲
                  </span>
                  <ng-template #blockOrder class="arrow active">
                    {{ this.filterService.sortingDirection }}
                  </ng-template>
                </th>
                <th
                  (click)="this.filterService.changeSortValue('title')"
                  [class.active]="this.filterService.activeClass === 'title'">
                  {{ transLoco('title') }}
                  <span
                    class="arrow"
                    *ngIf="!this.filterService.isTitle; else blockTitle">
                    ▼▲
                  </span>
                  <ng-template #blockTitle class="arrow active">
                    {{ this.filterService.sortingDirection }}
                  </ng-template>
                </th>
                <th
                  (click)="this.filterService.changeSortValue('description')"
                  [class.active]="
                    this.filterService.activeClass === 'description'
                  ">
                  {{ transLoco('description') }}
                  <span
                    class="arrow"
                    *ngIf="
                      !this.filterService.isDescription;
                      else blockDescription
                    ">
                    ▼▲
                  </span>
                  <ng-template #blockDescription class="arrow active">
                    {{ this.filterService.sortingDirection }}
                  </ng-template>
                </th>
                <th
                  (click)="this.filterService.changeSortValue('userId')"
                  [class.active]="this.filterService.activeClass === 'userId'">
                  {{ transLoco('user') }}
                  <span
                    class="arrow"
                    *ngIf="!this.filterService.isUser; else blockUser">
                    ▼▲
                  </span>
                  <ng-template #blockUser class="arrow active">
                    {{ this.filterService.sortingDirection }}
                  </ng-template>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="
                  let task of tasks
                    | sorting: 'word':this.headerService.keyWord
                    | sorting
                      : this.filterService.valueSort
                      : this.filterService.flagSortDirection
                "
                [routerLink]="['/boards', task.boardId]">
                <td>{{ task.order }}</td>
                <td>{{ task.title }}</td>
                <td>{{ task.description }}</td>
                <td>{{ task.userId }}</td>
              </tr>
              <tr *ngIf="this.headerService.keyWord" class="no-item">
                <td class="notfound">{{ transLoco('notFound') }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>
</ng-container>
